<h1 class="display-4">Добавление напитка</h1>

<div class="form-group mb-2">
    <label>Название</label>
    <input class="form-control" name="name" placeholder="Введите название напитка">
</div>

<div class="form-group mb-2">
    <label>Цена</label>
    <input class="form-control mb-3" name="price" placeholder="Введите цену">
</div>

<div class="form-group mb-2">
    <label>Количество</label>
    <input class="form-control mb-3" name="amount" placeholder="Введите количество">
</div>

<div class="form-group mb-2">
    <label>Изображение</label>
    <input class="form-control mb-3" name="img" placeholder="Введите цену">
</div>

<p name="addMethod"><a class="btn btn-success w-100">Добавить</a></p>

@section Scripts{
    <script>

        function CreateGUID() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'
                .replace(/[xy]/g, function (c) {
                    const r = Math.random() * 16 | 0,
                        v = c == 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
        }

        function RedirectPage(data){
            window.location = data;
        }

        $('p[name="addMethod"]').click(function (){
            let Id = CreateGUID();
            let name = $('input[name="name"]').val().toString();
            let price = $('input[name="price"]').val().toString();
            let amount = $('input[name="amount"]').val().toString();
            let img = $('input[name="img"]').val().toString();

            $.ajax({
                type: "POST",
                url: '@Url.Action("AddAdmin", "Drinks")',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({ Id, name, price, amount, img }),
                dataType: "json",
                success: RedirectPage,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", "Bearer " + sessionStorage.getItem("token"));
                }
            })
        })
    </script>
}