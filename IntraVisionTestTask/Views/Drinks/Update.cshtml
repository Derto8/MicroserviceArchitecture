@model Drinks

<h1 class="display-4">Обновление напитка</h1>

<div class="d-none">
    <input class="form-control" name="idDrink" value="@Model.Id">
</div>

<div class="form-group mb-2">
    <label>Название</label>
    <input class="form-control" name="name" value="@Model.Name" placeholder="Введите название напитка">
</div>

<div class="form-group mb-2">
    <label>Цена</label>
    <input class="form-control mb-3" name="price" value="@Model.Price" placeholder="Введите цену">
</div>

<div class="form-group mb-2">
    <label>Количество</label>
    <input class="form-control mb-3" name="amount" value="@Model.Amount" placeholder="Введите количество">
</div>

<div class="form-group mb-2">
    <label>Изображение</label>
    <input class="form-control mb-3" name="img" placeholder="Введите цену">
</div>

<p name="changeMethod"><a class="btn btn-success w-100">Обновить</a></p>

@section Scripts{
    <script>

        function RedirectPage(data) {
            window.location = data;
        }

        $('p[name="changeMethod"]').click(function () {
            let Id = $('input[name="idDrink"]').val().toString();
            let name = $('input[name="name"]').val().toString();
            let price = $('input[name="price"]').val().toString();
            let amount = $('input[name="amount"]').val().toString();
            let img = $('input[name="img"]').val().toString();

            $.ajax({
                type: "PUT",
                url: '@Url.Action("UpdateAdmin", "Drinks")',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({ Id, name, price, amount, img }),
                dataType: "json",
                success: RedirectPage,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", "Bearer " + sessionStorage.getItem("token"));
                }
            })
        })
    </script>
}
